<!-- Header -->
<header class="px-3 px-lg-7 pt-7">
  <div class="container-xl">
    <div>
      <div class="row align-items-center">
        <div *ngIf="sessionDetails" class="col-md-6 col-12 mb-3 mb-md-0">
          <!-- Title -->
          <h1 class="h2 mb-0 ls-tight">{{ sessionDetails[0].patientByPatient?.identifier }}</h1>
        </div>
        <!-- Actions -->
        <div class="col-md-6 col-12 text-md-end">
          <div class="mx-n1">
            <a routerLink="#!" class="btn d-inline-flex btn-sm btn-outline-primary mx-1">
              <span>Export Report</span>
            </a>
            <a (click)="this.createNewSessionAndRedirect()" class="btn d-inline-flex btn-sm btn-outline-primary mx-1">
              <span class="pe-2">
                <i class="bi bi-play-btn"></i>
              </span>
              <span>Start New Session</span>
            </a>
          </div>
        </div>
      </div>
      <!-- Nav -->
      <ul class="nav nav-tabs overflow-x mt-2">
        <li class="nav-item">
          <a class="nav-link font-regular active">All
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link font-regular">Starred
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link font-regular">Labbeled
          </a>
        </li>
      </ul>
    </div>
  </div>
</header>

<!-- Charts -->
<div class="container mt-8">
  <div class="row">
    <div class="col">
      <div class="card">
        <div class="card-body">
          <div class="mb-8 card-header">
            <h2 style="color: #000066;">Patient Engagement</h2><br>
            <span>
              <h5 style="color: #000066;">
                28 Mar - 31 Mar. 2022
              </h5>
              <i>(indicative data)</i>
            </span>
          </div>
          <canvas id="engagementChart" width="500" height="500"></canvas>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card">
        <div class="card-body">
          <!-- Title -->
          <!-- <select id="sessionVal" (change)="changeSessionsChart()">
            <option value="mindBodyConnection">Mind-Body Connection</option>
            <option value="cognitiveSkillsII">Cognitive Skills II</option>
          </select> -->

          <div class="card-header">
            <h2 style="color: #000066;">Achievement Ratio</h2><br>
            <span>
              <h5 style="color: #000066;">
                28 Mar - 31 Mar. 2022
              </h5>
              <i>(indicative data)</i>
            </span> <br>
            <div class="dropdown">
              <button class="btn btn-sm btn-neutral dropdown-toggle" type="button" id="dropdownMenuButton"
                data-bs-toggle="dropdown" aria-expanded="false">
                {{ selectedSessionChart }}
              </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <li><a class="dropdown-item" (change)="changeSessionsChart('cognitiveSkillsII')">Cognitive Skills II</a>
                </li>
              </ul>
            </div>
          </div>
          <canvas id="achievementChart" width="500" height="500"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Search Bar -->
<div class="container-xl mb-5 mt-5">
  <div class="input-group input-group-sm input-group-inline">
    <span class="input-group-text pe-2">
      <i class="bi bi-search"></i>
    </span>
    <input type="text" class="form-control" placeholder="Search session details" aria-label="Search"
      aria-describedby="">
  </div>
</div>

<!-- Filters dropdowns -->
<div class="container">
  <div class="row">
    <div class="col-sm">
      <div class="dropdown">
        <button class="btn btn-sm btn-neutral dropdown-toggle" type="button" id="dropdownMenuButton"
          data-bs-toggle="dropdown" aria-expanded="false">
          Session Plan
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <form>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">First option</label>
              </div>
            </div>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">Second option</label>
              </div>
            </div>
            <div class="dropdown-item">
              <button class="btn btn-sm btn-primary w-full">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="col-sm">
      <div class="dropdown">
        <button class="btn btn-sm btn-neutral dropdown-toggle" type="button" id="dropdownMenuButton"
          data-bs-toggle="dropdown" aria-expanded="false">
          Activity Type
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <form>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">First option</label>
              </div>
            </div>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">Second option</label>
              </div>
            </div>
            <div class="dropdown-item">
              <button class="btn btn-sm btn-primary w-full">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="col-sm">
      <div class="dropdown">
        <button class="btn btn-sm btn-neutral dropdown-toggle" type="button" id="dropdownMenuButton"
          data-bs-toggle="dropdown" aria-expanded="false">
          Time
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <form>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">First option</label>
              </div>
            </div>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">Second option</label>
              </div>
            </div>
            <div class="dropdown-item">
              <button class="btn btn-sm btn-primary w-full">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- <div class="col-sm">
      Date
    </div> -->
    <div class="col-sm">
      <div class="dropdown">
        <button class="btn btn-sm btn-neutral dropdown-toggle" type="button" id="dropdownMenuButton"
          data-bs-toggle="dropdown" aria-expanded="false">
          Performance
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <li><a class="dropdown-item" href="#">High Performance (&gt;75%)</a></li>
          <li><a class="dropdown-item" href="#">Avg Performance (&lt;75%)</a></li>
          <li><a class="dropdown-item" href="#">Low Performance (&lt;50%)</a></li>
          <li><a class="dropdown-item" href="#">Poor Performance (&lt;25%)</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Session table -->
<div class="container-xl mt-5">
  <div class="rounded-top bg-light p-5">
    <div class="row">
      <div class="col">
        <h6>Sessions</h6>
      </div>
      <div class="col text-end">
        <span class="me-3">1-10 of 36</span>
        <span role="button" class="me-1">&#60;</span>
        <span role="button">&#62;</span>
      </div>
    </div>

    <!-- Put a divider -->
    <hr>

    <!-- Put action icons that'd act on selected rows -->
    <ul class="nav nav-pills">
      <li class="nav-item">
        <button (click)="this.toogleRowsCheck()" class="nav-link">
          <i class="bi bi-check-square me-2"></i>Check all
        </button>
      </li>
      <li class="nav-item">
        <button class="nav-link">
          <i class="bi bi-trash me-2"></i>Delete
        </button>
      </li>
      <li class="nav-item">
        <button class="nav-link">
          <i class="bi bi-bookmark-plus me-2"></i>Label
        </button>
      </li>
      <li class="nav-item">
        <button class="nav-link">
          <i class="bi bi-archive me-2"></i>Archive
        </button>
      </li>
    </ul>

  </div>
  <div class="table-responsive">
    <table class="table table-hover table-nowrap">
      <thead class="thead-light">
        <tr>
          <th class="text-lg" scope="col">
            <div class="form-check">
              <input (click)="this.toogleRowsCheck()" class="form-check-input" type="checkbox" value=""
                id="flexCheckAll">
              <label class="form-check-label" for="flexCheckAll"></label>
            </div>
          </th>
          <th></th>
          <th scope="col">Care Plan</th>
          <th scope="col">Activity Type</th>
          <th scope="col">Time</th>
          <th scope="col">Date</th>
          <th scope="col">Performance</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let session of sessionDetails! | paginate: {
          itemsPerPage,
          currentPage,
          totalItems: totalSessionsCount
        }">
          <!-- Checkbox & Star button -->
          <td class="text-lg" scope="col">
            <div class="form-check">
              <input class="form-check-input row-check-input" type="checkbox" value="" id="flexCheckRow1">
              <label class="form-check-label" for="flexCheckRow1"></label>
            </div>
          </td>

          <td class="text-lg" scope="col">
            <i class="bi bi-star"></i>
          </td>

          <td>
            <a class="text-heading font-semibold" href="/app/sessions/{{session.id}}">
              {{ session.careplanByCareplan?.name }}
            </a>
          </td>
          <td>
            <!-- <span>{{ session.activityType }}</span> -->
            <span>Physical</span>
          </td>
          <td>
            <span>{{ session.timeDuration || 'In Progress' }}</span>
          </td>
          <td>
            <span>{{ session.createdAt | date }}</span>
          </td>
          <td>
            <div *ngIf="session.totalPerformanceRatio" class="d-flex align-items-center">
              <span class="me-2">{{session.totalPerformanceRatio}}%</span>
              <div>
                <div class="progress">
                  <div class="progress-bar rounded-pill" role="progressbar"
                    style="width: {{ session.totalPerformanceRatio }}%; background-color: #A6B7D4">
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="!session.totalPerformanceRatio">
              <span>In Progress</span>
            </div>
          </td>
          <td class="text-end">
            <div class="dropdown">
              <a class="text-muted" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                <i class="bi bi-three-dots-vertical"></i>
              </a>
              <div class="dropdown-menu dropdown-menu-end">
                <a href="#!" class="dropdown-item">
                  Edit Session Entry
                </a>
                <a href="#!" class="dropdown-item">
                  Archive Session Entry
                </a>
                <a href="#!" class="dropdown-item">
                  Delete Session Entry
                </a>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <nav>
      <pagination-controls (pageChange)="this.pageChanged($event)">
      </pagination-controls>
    </nav>

  </div>
</div>