<!-- Header -->
<header class="px-3 px-lg-7 pt-7 custom_header">
  <div class="container-xl">
    <div>
      <div class="row align-items-center">
        <div *ngIf="sessionDetails" class="col-md-6 col-12 mb-3 mb-md-0">
          <!-- Title -->
          <xng-breadcrumb separator=">"></xng-breadcrumb>
          <h1 class="h2 mb-0 ls-tight mt-5">{{ sessionDetails[0].patientByPatient?.identifier }}</h1>
        </div>
        <!-- Actions -->
        <div class="col-md-6 col-12 text-md-end">
          <div class="mx-n1">
            <a routerLink="#!" class="btn d-inline-flex btn-sm custom_btn_class btn-primary mx-1">
              <span>Export Report</span>
            </a>
            <a (click)="this.createNewSessionAndRedirect()" class="btn d-inline-flex btn-sm custom_btn_class btn-primary mx-1">
              <!-- <a (click)="openDialog()" class="btn d-inline-flex btn-sm custom_btn_class btn-primary mx-1"> -->
              <span class="pe-2">
                <i class="bi bi-play-btn"></i>
              </span>
              <span>Start New Session</span>
            </a>
          </div>
        </div>
      </div>
      <!-- Nav -->
      <ul class="nav nav-tabs overflow-x mt-2">
        <li class="nav-item">
          <a class="clickable nav-link font-regular active">All
          </a>
        </li>
        <li class="nav-item">
          <a class="clickable nav-link font-regular">Starred
          </a>
        </li>
        <li class="nav-item">
          <a class="clickable nav-link font-regular">Labbeled
          </a>
        </li>
      </ul>
    </div>
  </div>
</header>

<!-- Charts -->
<div class="container mt-8">
  <div class="row">
    <div class="col-md-6">
      <div class="card">
        <div class="card-body">
          <div class="card-header">
            <h4 style="color: #000066;">Patient Engagement</h4>
            <!-- <span>
              <h5 style="color: #000066;">
                {{ startDate | date }} - {{ endDate | date }}
              </h5>
            </span> -->
          </div>
          <canvas class="chart-canvas" id="engagementChart" width="500" height="500"></canvas>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card">
        <div class="card-body">
          <div class="card-header">
            <h4 style="color: #000066;">Achievement Ratio</h4>
            <!-- <span>
              <h5 style="color: #000066;">
                {{ startDate | date }} - {{ endDate | date }}
              </h5>
            </span> <br> -->
            <!-- <div class="form-group">
              <select class="form-control" id="sessionVal" name="isActive" (change)="changeSessionsChart()">
                <option value="allSessions">All Sessions</option>
                <option value="cognitiveSkillsII">Cognitive Skills II</option>
              </select>
            </div> -->
          </div>
          <canvas class="chart-canvas" id="achievementChart" width="500" height="500"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Search Bar -->
<div class="container-xl mb-5 mt-5">
  <div class="align_search_filter">
  <div class="input-group input-group-sm input-group-inline input_box_icons_alignment">
    <span class="input-group-text pe-2">
      <i class="bi bi-search"></i>
    </span>
    <input type="text" class="form-control" placeholder="Search session details" aria-label="Search" aria-describedby=""
      [(ngModel)]="filterEntity.careplanByCareplan">
  </div>
  <img src="/assets/images/filter_icon.svg"(click)="togglefilterDiv()" class="icons_align"/>
  <img src="/assets/images/setting.svg" class="filter_align icons_align"/>
</div>
</div>

<!-- Filters dropdowns -->
<div class="container" [hidden]="isShowFilter">
  <div class="row">
    <div class="col-sm">
      <div class="dropdown">
        <button class="btn btn-sm btn-neutral dropdown-toggle" type="button" id="dropdownMenuButton"
          data-bs-toggle="dropdown" aria-expanded="false">
          Session Plan
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <form>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">First option</label>
              </div>
            </div>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">Second option</label>
              </div>
            </div>
            <div class="dropdown-item">
              <button class="btn btn-sm btn-primary w-full">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="col-sm">
      <div class="dropdown">
        <button class="btn btn-sm btn-neutral dropdown-toggle" type="button" id="dropdownMenuButton"
          data-bs-toggle="dropdown" aria-expanded="false">
          Activity Type
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <form>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">First option</label>
              </div>
            </div>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">Second option</label>
              </div>
            </div>
            <div class="dropdown-item">
              <button class="btn btn-sm btn-primary w-full">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="col-sm">
      <div class="dropdown">
        <button class="btn btn-sm btn-neutral dropdown-toggle" type="button" id="dropdownMenuButton"
          data-bs-toggle="dropdown" aria-expanded="false">
          Time
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <form>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">First option</label>
              </div>
            </div>
            <div class="dropdown-item py-1 d-flex align-items-center">
              <div class="text-lg">
                <input class="form-check-input" type="checkbox" id="flexCheck1" value="" aria-label="...">
              </div>
              <div class="ms-3 me-5">
                <label for="flexCheck1">Second option</label>
              </div>
            </div>
            <div class="dropdown-item">
              <button class="btn btn-sm btn-primary w-full">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="col-sm">
      <mat-form-field class="details_page alignment_date condition_select" appearance="fill">
        <input matInput [matDatepicker]="picker" placeholder="Date">
        <mat-datepicker-toggle matSuffix [for]="picker">
          <!-- <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon> -->
        </mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </div>
    <div class="col-sm">
      <div class="dropdown">
        <button class="btn btn-sm btn-neutral dropdown-toggle" type="button" id="dropdownMenuButton"
          data-bs-toggle="dropdown" aria-expanded="false">
          Performance
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <li><a class="dropdown-item" href="#">High Performance (&gt;75%)</a></li>
          <li><a class="dropdown-item" href="#">Avg Performance (&lt;75%)</a></li>
          <li><a class="dropdown-item" href="#">Low Performance (&lt;50%)</a></li>
          <li><a class="dropdown-item" href="#">Poor Performance (&lt;25%)</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Session table -->
<div class="container-xl mt-5">
  <div class="rounded-top bg-light p-5 custom_rounded_top">
    <div class="row">
      <div class="col">
        <h6>Sessions</h6>
      </div>
      <div class="col text-end">
        <!-- <mat-paginator [pageSize]="5"
        #TableOnePaginator="matPaginator" showFirstLastButtons class="top_pagination">
      </mat-paginator> -->
      </div>
    </div>

    <!-- Put a divider -->
    <!-- <hr> -->

    <!-- Put action icons that'd act on selected rows -->
    <!-- <ul class="nav nav-pills">
      <li class="nav-item">
        <button (click)="this.toogleRowsCheck()" class="nav-link">
          <i class="bi bi-check-square me-2"></i>Check all
        </button>
      </li>
      <li class="nav-item">
        <button class="nav-link">
          <i class="bi bi-trash me-2"></i>Delete
        </button>
      </li>
      <li class="nav-item">
        <button class="nav-link">
          <i class="bi bi-bookmark-plus me-2"></i>Label
        </button>
      </li>
      <li class="nav-item">
        <button class="nav-link">
          <i class="bi bi-archive me-2"></i>Archive
        </button>
      </li>
    </ul> -->

  </div>
  <div class="table-responsive">
    <table class="table table-hover table-nowrap patients_detail_table" matTableFilter [exampleEntity]="filterEntity"
      [filterType]="filterType" mat-table [dataSource]="dataSource" matSort>
      <ng-container matColumnDef="total_count">
        <th mat-header-cell *matHeaderCellDef class="custom_table_header"> <div class="form-check">
          <mat-checkbox (change)="$event ? selection.toggle(row) : null" class="custom_checkbox"></mat-checkbox>
        </div> </th>
        <td mat-cell *matCellDef="let element">
          <div class="form-check">
            <mat-checkbox class="custom_checkbox" [checked]="selection.isSelected(row)"></mat-checkbox>
          </div>
        </td>
      </ng-container>
      <ng-container matColumnDef="label_star">
        <th mat-header-cell *matHeaderCellDef class="custom_table_header"></th>
        <td mat-cell *matCellDef="let element" class="clicked_class">
          <i class="bi bi-star custom_star_color"></i>
        </td>
      </ng-container>
      <ng-container matColumnDef="careplanByCareplan">
        <th mat-header-cell *matHeaderCellDef class="custom_table_header">Care Plan
          <input [hidden]="isShowDiv" matInput [(ngModel)]="filterEntity.careplanByCareplan" value="{{seachValue}}">
        </th>
        <td mat-cell *matCellDef="let element" (click)="openSessionDetailsPage(element.id!, element)" class="clicked_class">
          <span class="text-heading font-semibold">
            {{ element.careplanByCareplan?.name }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="activity_type">
        <th mat-header-cell *matHeaderCellDef class="custom_table_header">Activity Type</th>
        <td mat-cell *matCellDef="let element" (click)="openSessionDetailsPage(element.id!, element)" class="clicked_class">
          <!-- <span>{{ session.activityType }}</span> -->
          <span>Physical</span>
        </td>
      </ng-container>
      <ng-container matColumnDef="timeDuration">
        <th mat-header-cell *matHeaderCellDef class="custom_table_header" mat-sort-header>Time</th>
        <td mat-cell *matCellDef="let element" (click)="openSessionDetailsPage(element.id!, element)" class="clicked_class">
          <span>{{ element.timeDuration || 'In Progress' }}</span>
        </td>
      </ng-container>
      <ng-container matColumnDef="createdAt">
        <th mat-header-cell *matHeaderCellDef class="custom_table_header" mat-sort-header>Date</th>
        <td mat-cell *matCellDef="let element" (click)="openSessionDetailsPage(element.id!, element)" class="clicked_class">
          <span>{{ element.createdAt | date }}</span>
        </td>
      </ng-container>
      <ng-container matColumnDef="totalPerformanceRatio">
        <th mat-header-cell *matHeaderCellDef class="custom_table_header" mat-sort-header>Performance</th>
        <td mat-cell *matCellDef="let element" (click)="openSessionDetailsPage(element.id!, element)" class="clicked_class">
          <div *ngIf="element.totalPerformanceRatio" class="d-flex align-items-center">
            <span class="me-2">{{element.totalPerformanceRatio}}%</span>
            <div>
              <div class="progress">
                <div class="progress-bar rounded-pill" role="progressbar"
                  style="width: {{ element.totalPerformanceRatio }}%; background-color: #A6B7D4">
                </div>
              </div>
            </div>
          </div>
          <div *ngIf="!element.totalPerformanceRatio">
            <span>In Progress</span>
          </div>
        </td>
      </ng-container>
      <ng-container matColumnDef="activity_action">
        <th mat-header-cell *matHeaderCellDef class="custom_table_header"></th>
        <td mat-cell *matCellDef="let element">
          <div class="dropdown">
            <a class="text-muted" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">
              <i class="bi bi-three-dots-vertical"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-end">
              <a href="#!" class="dropdown-item">
                Edit Session Entry
              </a>
              <a href="#!" class="dropdown-item">
                Archive Session Entry
              </a>
              <a href="#!" class="dropdown-item">
                Delete Session Entry
              </a>
            </div>
          </div>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="row_hover"></tr>
    </table>
    <mat-paginator [pageSize]="10" #TableOnePaginator="matPaginator" showFirstLastButtons>
    </mat-paginator>
    <!-- <nav>
      <pagination-controls (pageChange)="this.pageChanged($event)">
      </pagination-controls>
    </nav> -->

  </div>
</div>
